@model MVCBlog.Models.Article

@{
    ViewBag.Title = "Article";
}

<ul class="uk-breadcrumb">
    <li><a href="@Url.Action("Index", "Home")">Home</a></li>
    <li><a href="@Url.Action("Category", "Blog", new { id = Model.CategoryId })">@Model.Category.CategoryName</a></li>
    <li class="uk-active"><span>Article</span></li>
</ul>

<div>
    <button class="uk-button uk-button-success show-modal">Delete Article</button>
    @Html.ActionLink("Edit Article", "EditArticle", "Blog", new { id = Model.ArticleId }, new { @class = "uk-button uk-button-success" })
</div>

<article class="uk-article">
    <h1 class="uk-article-title">@Model.ArticleName</h1>
	<p class="uk-article-meta">Written by @Model.User.Login</p>
	<p>@Model.ArticleText</p>
    <hr class="uk-article-divider">
</article>
<p></p>

@foreach (var comment in Model.Comments)
{
    <article class="uk-comment">
	    <header class="uk-comment-header">
		    <img class="uk-comment-avatar" src="@Url.Content("~/Content/images/avatar_placeholder.png")" alt="">
		    <div class="uk-comment-meta">Written by @comment.User.Login on @comment.CommentDate</div>
	    </header>
	    <div class="uk-comment-body">@comment.CommentText</div>
    </article>
    <p></p>
}

<div class="uk-modal" id="delete-modal">
    <div class="uk-modal-dialog  uk-modal-dialog-slide">
        <form method="post" action="@Url.Action("DeleteArticle", "Blog", new { id = Model.ArticleId } )">
            <p>Are you sure you want to delete "@Model.ArticleName" article?</p>
            <button class="uk-button uk-button-primary" id="do-cancel">Cancel</button>
            <button class="uk-button uk-button-danger" type="submit">Delete</button>    
        </form>
    </div>
</div>

<script>
    $(function () {
        var modal = new $.UIkit.modal.Modal("#delete-modal");

        $(".show-modal").click(function () {
            modal.show();
        });

        $("#do-cancel").click(function () {
            modal.hide();
        });
    });
</script>
